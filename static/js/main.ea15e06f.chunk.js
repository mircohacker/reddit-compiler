(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{183:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(10),o=a.n(l),c=(a(79),a(7)),i=a(22),s=(a(80),a(44)),u=a(8),d=a(15),m=a(14),h=a(21),p=a(32),f=a(36),E=a(29),v=a.n(E),b=a(73),g={BACKEND_HOST:"https://3vk5ib05ne.execute-api.eu-central-1.amazonaws.com"},y=Object(b.a)({},g),w=function(e){var t=Object(n.useState)(""),a=Object(c.a)(t,2),l=a[0],o=a[1],i=Object(n.useState)(!1),E=Object(c.a)(i,2),b=E[0],g=E[1],w=Object(n.useState)(2),O=Object(c.a)(w,2),C=O[0],j=O[1],x=Object(n.useState)(!1),N=Object(c.a)(x,2),k=N[0],S=N[1],T=Object(n.useState)(),A=Object(c.a)(T,2),L=A[0],_=A[1];return r.a.createElement("div",null,r.a.createElement(u.a,{onSubmit:function(t){t.preventDefault(),g(!0),function(e,t,a){return v.a.get("".concat(y.BACKEND_HOST,"/chapters"),{params:{url:e,search_term_length:t,all_reddit:a}})}(l,C,k).then((function(t){e.onSubmit(t.data.chapters),_(t.data)})).catch((function(t){e.onError(t)})).finally((function(){g(!1)}))}},r.a.createElement(u.a.Group,null,r.a.createElement(u.a.Label,{className:"full-width"},"URL of one chapter",r.a.createElement(u.a.Control,{type:"url",required:!0,value:l,placeholder:"https://www.reddit.com/r/HFY/comments/flx9ae/the_galactic_archives_present_humanity_part_2/",onChange:function(e){return o(e.target.value)}})),r.a.createElement(u.a.Text,{className:"text-muted"},"Just paste the full URL to one of the chapters of the series you want.")),r.a.createElement(u.a.Group,null,r.a.createElement(f.a,null,r.a.createElement(f.a.Toggle,{as:d.a,variant:"link",eventKey:"additionalOptionsCollapse"},"Click here for additional options"),r.a.createElement(f.a.Collapse,{eventKey:"additionalOptionsCollapse"},r.a.createElement(s.a,null,r.a.createElement(m.a,null,r.a.createElement(u.a.Group,{as:m.a,controlId:"formGridCity"},r.a.createElement(u.a.Label,null,"Search term length"),r.a.createElement(u.a.Control,{type:"number",min:"0",value:C,onChange:function(e){return j(e.target.valueAsNumber)}}),r.a.createElement(u.a.Text,{className:"text-muted"},"How many words from the start of the given chapter should be used as search term."))),r.a.createElement(m.a,null,r.a.createElement(u.a.Group,{as:m.a,controlId:"formGridCity"},r.a.createElement("p",null,"Search over all subreddits"),r.a.createElement(d.a,{size:"sm",style:{width:"4em"},variant:k?"primary":"secondary",onClick:function(){return S((function(e){return!e}))}},k?"Yay":"Nay"),r.a.createElement(u.a.Text,{className:"text-muted"},"With no only the subreddit of the provided chapter is searched. With yes all of reddit will be searched for chapters of this author."))))))),r.a.createElement(d.a,{variant:"primary",type:"submit",disabled:b},"Add Chapters ",b&&r.a.createElement(p.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"},r.a.createElement("span",{className:"sr-only"},"Loading..."))),(null===L||void 0===L?void 0:L.author)&&r.a.createElement(h.a.Body,null,r.a.createElement(s.a,null,r.a.createElement(m.a,null,"Author: ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.reddit.com/user/"+(null===L||void 0===L?void 0:L.author)},null===L||void 0===L?void 0:L.author)),r.a.createElement(m.a,null,r.a.createElement("div",null,"Search Term: [",null===L||void 0===L?void 0:L.search_term,"]"),r.a.createElement("div",{className:"text-muted"},"This term is used to search for chapters."))))))},O=function(){return r.a.createElement("svg",{className:"bi bi-trash",width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"M5.5 5.5A.5.5 0 016 6v6a.5.5 0 01-1 0V6a.5.5 0 01.5-.5zm2.5 0a.5.5 0 01.5.5v6a.5.5 0 01-1 0V6a.5.5 0 01.5-.5zm3 .5a.5.5 0 00-1 0v6a.5.5 0 001 0V6z"}),r.a.createElement("path",{d:"M14.5 3a1 1 0 01-1 1H13v9a2 2 0 01-2 2H5a2 2 0 01-2-2V4h-.5a1 1 0 01-1-1V2a1 1 0 011-1H6a1 1 0 011-1h2a1 1 0 011 1h3.5a1 1 0 011 1v1zM4.118 4L4 4.059V13a1 1 0 001 1h6a1 1 0 001-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"}))},C=a(64),j=a.n(C),x=function(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),l=a[0],o=a[1];return r.a.createElement(h.a,null,r.a.createElement(h.a.Header,{onClick:function(){o(!l)}},e.chapter.title,r.a.createElement(d.a,{variant:"light",className:"float-right",onClick:function(){e.onDelete(e.chapter)}},r.a.createElement(O,null))),l&&r.a.createElement(h.a.Body,null,r.a.createElement(j.a,{source:e.chapter.snippet})))},N=a(24),k=a(35);function S(){var e=Object(i.a)(["\n\n"]);return S=function(){return e},e}function T(){var e=Object(i.a)(["\n\n"]);return T=function(){return e},e}var A=N.a.div(T()),L=N.a.div(S()),_=function(e){var t=function(t){var a=e.chapters.filter((function(e,a){return e.id!==t.id}));e.onChapterListUpdate(a)};return r.a.createElement(k.a,{onDragEnd:function(t){if(t.destination){var a=function(e,t,a){var n=Array.from(e);return n.splice(a,0,n.splice(t,1)[0]),n}(e.chapters,t.source.index,t.destination.index);e.onChapterListUpdate(a)}}},r.a.createElement("h2",null,"List of Chapters"),r.a.createElement("p",{className:"text-muted"},"Here you see the list of fetched chapters. You can rearrange chapters via drag and drop. If you click on a chapter you will see a small preview of the chapter."),r.a.createElement(k.c,{droppableId:"droppable"},(function(a,n){return r.a.createElement(A,Object.assign({},a.droppableProps,{ref:a.innerRef}),e.chapters.map((function(e,a){return r.a.createElement(k.b,{key:e.id,draggableId:e.id,index:a},(function(n,l){return r.a.createElement(L,Object.assign({key:e.id,ref:n.innerRef},n.draggableProps,n.dragHandleProps),r.a.createElement(x,{chapter:e,index:a,onDelete:t}))}))})),a.placeholder)})))},H=a(72),I=function(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),l=a[0],o=a[1],i=r.a.createElement("div",null);return l&&(i=r.a.createElement(H.a,{animated:!0,now:100})),e.chapters.length>0?r.a.createElement("div",null,r.a.createElement(d.a,{onClick:function(){o(!0),function(e){var t=e.map((function(e){return e.id}));return v.a.get("".concat(y.BACKEND_HOST,"/epub"),{params:{ids:t}})}(e.chapters).then((function(e){var t,a=e.data,n=window.URL.createObjectURL(function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:512,n=atob(e),r=[],l=0;l<n.length;l+=a){for(var o=n.slice(l,l+a),c=new Array(o.length),i=0;i<o.length;i++)c[i]=o.charCodeAt(i);var s=new Uint8Array(c);r.push(s)}return new Blob(r,{type:t})}(a.content,a.mimeType)),r=document.createElement("a");r.href=n,r.setAttribute("download",a.fileName),document.body.appendChild(r),r.click(),null===(t=r.parentNode)||void 0===t||t.removeChild(r)})).catch((function(t){e.onError(t)})).finally((function(){o(!1)}))},disabled:l},"Download ",l&&r.a.createElement(p.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"},r.a.createElement("span",{className:"sr-only"},"Loading..."))),r.a.createElement("p",{className:"text-muted"},"The reddit API used under the hood imposes rate limiting. So the creation of the epub can take some time especially with many chapters"),i):r.a.createElement("div",null,"Add chapters to enable download")},z=a(69),B=a(70),D=a(71),G=function(e){return r.a.createElement("footer",{className:"pt-4 my-md-5 pt-md-5 border-top"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6 col-md"},r.a.createElement("p",null,"I frequently stumbled upon new series on reddit but to read the full series I had to navigate to all the chapters manually and frequently lost the reading progress by accidentally closing the tab etc. Therefor I implmented a way to compile a whole series of posts (identified by a common prefix) into one epub file. ",r.a.createElement("br",null)," Enjoy!"),r.a.createElement("p",null,"The goal of this project is learning react. All the sources for the site and the API are checked in on ",r.a.createElement("a",{href:"https://github.com/mircohaug/reddit-compiler",target:"_blank",rel:"noopener noreferrer"},"Github"),"."),r.a.createElement("p",null,"The used api can be explored ",r.a.createElement("a",{href:y.BACKEND_HOST+"/docs"},"here")),r.a.createElement("p",null,"This project uses the GPLv3 License. All content belongs to the original authors."))))};function U(){var e=Object(i.a)(["\npadding: 8px;\nmargin: 8px;\nborder: 2px solid lightgrey;\nborder-radius: 5px;\n"]);return U=function(){return e},e}var V=N.a.div(U()),q=function(e){var t=Object(n.useState)([]),a=Object(c.a)(t,2),l=a[0],o=a[1],i=Object(n.useState)(""),s=Object(c.a)(i,2),u=s[0],d=s[1],m=function(e){var t="The network request was not successful.";e.response?t="The request failed with code ".concat(e.response.status," ").concat(e.response.statusText,". The message was ").concat(JSON.stringify(e.response.data)):e.request?(t="The network request failed because: ".concat(e.message),console.log(e)):console.log("Error",e.message),d(t)};return r.a.createElement("div",null,r.a.createElement(z.a,null,r.a.createElement(B.a,null,r.a.createElement("h1",{className:"header"},"Reddit serial compiler"),r.a.createElement("h2",null,"Convert your favourite reddit fiction into a convenient ebook!!")),u&&r.a.createElement(D.a,{variant:"danger",onClose:function(){return d("")},dismissible:!0},u),r.a.createElement(V,null,r.a.createElement(w,{onSubmit:function(e){o(l.concat(e).filter((function(e,t,a){return t===a.findIndex((function(t){return t.id===e.id}))})))},onError:m})),r.a.createElement(V,null,r.a.createElement(_,{chapters:l,onChapterListUpdate:function(e){o(e)}})),r.a.createElement(V,null,r.a.createElement(I,{chapters:l,onError:m})),r.a.createElement(G,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},74:function(e,t,a){e.exports=a(183)},79:function(e,t,a){},80:function(e,t,a){}},[[74,1,2]]]);
//# sourceMappingURL=main.ea15e06f.chunk.js.map